<!DOCTYPE html>
<html>
<head>
  <title>Web Cari Uang</title>
</head>
<body>
  <h1>Simulator Cari Uang</h1>
  <button onclick="tambahUang()">Kerja Dapat 100</button>
  <p id="status"></p>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, doc, setDoc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
    import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "ISI_PUNYAMU",
      authDomain: "ISI_PUNYAMU",
      projectId: "ISI_PUNYAMU",
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    let userId;

    signInAnonymously(auth).then(user => {
      userId = user.user.uid;
    });

    window.tambahUang = async function () {
      const userRef = doc(db, "users", userId);
      const userSnap = await getDoc(userRef);

      if (!userSnap.exists()) {
        await setDoc(userRef, { saldo: 100 });
      } else {
        await updateDoc(userRef, {
          saldo: userSnap.data().saldo + 100
        });
      }

      document.getElementById("status").innerText = "Berhasil tambah 100!";
    }
  </script>
</body>
</html>